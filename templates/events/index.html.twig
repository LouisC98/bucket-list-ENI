{% extends 'base.html.twig' %}

{% block title %}Events | Bucket List{% endblock %}

{% block body %}
    <section class="mx-auto px-2 pb-16">
        <h2 class="text-4xl text-shadow-md font-semibold text-center my-7">Evénements</h2>

        <form action="{{ path('app_events_index') }}" method="get" class="flex gap-4 justify-center items-center my-5">
            <span class="font-semibold">Trier</span>
            <div  class="grid gap-1">
                <label for="startDate" class="font-semibold">Date de début</label>
                <input type="date" name="startDate" id="startDate" class="border border-gray-400 rounded p-1" value="{{ currentFilters.startDate }}">
            </div>
            <div class="grid gap-1">
                <label for="city" class="font-semibold" >Ville</label>
                <input type="text" name="city" id="city" class="border border-gray-400 rounded p-1" value="{{ currentFilters.city }}" placeholder="ex: Paris">
            </div>
            <button class="btn-primary" type="submit">Rechercher</button>
        </form>

        <div id="eventsContainer" class="grid gap-3 mx-auto md:max-w-4xl">
            {% for event in events %}
                <div class="flex gap-2 shadow-md border border-gray-300 rounded-lg overflow-hidden min-h-50">
                    <a href="{{ event.canonicalurl }}" class="text-shadow-md flex text-center items-center hover:text-blue-600 overflow-hidden min-w-1/3 ">
                        <img src="{{ event.thumbnail }}" alt="Image de l'event" class="h-full w-full rounded-l-lg duration-300 hover:scale-110 object-cover">
                    </a>
                    <div class="col-span-2 grid items-center">
                        <a href="{{ event.canonicalurl }}" class="text-xl font-semibold text-shadow-md hover:text-blue-600 hover:scale-105 hover:translate-x-3 duration-300">
                            <h4 class="">
                                {{ event.title_fr }}
                            </h4>
                        </a>
                        <div>
                            <span class="font-semibold">Date : </span>
                            <span>{{ event.daterange_fr }}</span>
                        </div>
                        <div class="flex gap-1">
                            <span class="font-semibold">Adresse :</span>
                            <p>
                                {{ event.location_name }}
                                <br>
                                {{ event.location_address }}
                            </p>
                        </div>

                        <em class="p-2">{{ event.description_fr }}</em>
                    </div>
                </div>
                {% else %}
                <div class="text-center text-lg font-semibold my-5">Pas d'évenements trouvé</div>
            {% endfor %}
        </div>

        {% if pagination.totalPages > 1 %}
            <div class="mt-8 flex justify-center items-center space-x-4">
                {% if pagination.hasPrev %}
                    <a href="{{ path('app_events_index', app.request.query.all|merge({page: pagination.currentPage - 1})) }}"
                       class="px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600">
                        ← Précédent
                    </a>
                {% endif %}

                <span class="text-gray-600">
                    Page {{ pagination.currentPage }} sur {{ pagination.totalPages }}
                </span>

                {% if pagination.hasNext %}
                    <a href="{{ path('app_events_index', app.request.query.all|merge({page: pagination.currentPage + 1})) }}"
                       class="px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600">
                        Suivant →
                    </a>
                {% endif %}
            </div>
        {% endif %}
    </section>
{% endblock %}